(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["stickynotes"],{"29b1":function(t,e,n){"use strict";n("8f3d")},"3f09":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.minimized,expression:"!minimized"}],staticClass:"fragment",style:{zIndex:t.zIndex},attrs:{id:"window-sticky"}},t._l(t.notes,(function(e,s){return n("sticky-note",{key:s,class:["note","note--"+e.color],attrs:{dragHandle:".note__control",parent:!0,active:!0,"prevent-deactivation":!0,x:e.x,y:e.y,w:e.w,h:e.h,minWidth:150,minHeight:100},on:{dragstop:function(e,n){return t.onDragged(s,e,n)},resizestop:function(e,n,i,o){return t.onResized(s,e,n,i,o)}},nativeOn:{click:function(e){return t.focus(s)}}},[n("div",{staticClass:"note__control"},[n("button",{style:t.getIcon("add"),attrs:{"aria-label":"add"},on:{click:function(e){return e.stopPropagation(),t.add(e)}}}),n("div",{staticClass:"note__control-group"},[n("button",{style:t.getIcon("close"),attrs:{"aria-label":"close"},on:{click:function(e){return e.stopPropagation(),t.close(s)}}})])]),n("div",{staticClass:"note__content"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"note.content"}],ref:"note",refInFor:!0,domProps:{value:e.content},on:{input:function(n){n.target.composing||t.$set(e,"content",n.target.value)}}})])])})),1)},i=[],o=n("0f35"),c=n("6792"),a=n("fb19"),r=n.n(a),d=n("c19f"),l=n("01b4");const h=["blue","green","pink","purple","white","yellow"],u=200,m={x:(window.innerWidth-u)/2,y:(window.innerHeight-u)/2-20,w:u,h:u,color:h[h.length-1],content:""};var p={data(){const t="sticky",{assets:e,windows:n,user:s}=this.$store.state,{notes:i}=this.$store.state.stickynotes,c=n.find(e=>e.id===t);return{id:t,user:s,notes:i.length?i:[{...m}],zIndex:c.index,minimized:c.minimized,getIcon:t=>({backgroundImage:`url(${Object(o["a"])(e.misc,"stickynotes-"+t)})`}),timeout:null,unsubscribe:null}},watch:{notes:{deep:!0,handler(t,e){t.length!==e.length?this.save():(clearTimeout(this.timeout),this.timeout=setTimeout(this.save,600))}}},mounted(){this.unsubscribe=this.$store.subscribe((t,e)=>{if(t.type.includes("Window")){const t=e.windows.find(t=>t.id===this.id);this.zIndex=t?t.index:99,this.minimized=!!t&&t.minimized}t.type===d["a"].SetNotes&&(this.notes=e.stickynotes.notes)})},destroyed(){this.unsubscribe()},methods:{add(){const t=h[Object(o["q"])(0,h.length-1)];this.notes.push({...m,color:t})},async close(t){const e=1===this.notes.length;this.notes.splice(t,1),e&&(await this.$nextTick(),this.$root.$emit(c["c"].CloseWindow,this.id))},focus(t){if(t<this.notes.length-1){const[e]=this.notes.splice(t,1);this.notes.push(e)}this.$store.commit(l["a"].WindowFocus,this.id),this.$refs.note[this.notes.length-1].focus()},save(){this.$store.dispatch(d["a"].SetNotes,this.notes)},onDragged(t,e,n){this.notes[t].x=e,this.notes[t].y=n},onResized(t,e,n,s,i){this.notes[t].x=e,this.notes[t].y=n,this.notes[t].w=s,this.notes[t].h=i}},components:{StickyNote:r.a}},w=p,f=(n("29b1"),n("2877")),g=Object(f["a"])(w,s,i,!1,null,"035bc5ba",null);e["default"]=g.exports},"8f3d":function(t,e,n){}}]);